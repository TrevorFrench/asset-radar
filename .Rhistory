ggplot() +
geom_point() +  # Add points
geom_abline(slope = 2, intercept = 3, color = "red")
library(ggplot2)
# Create the plot
ggplot() +
geom_point() +  # Add points
geom_abline(slope = 2, intercept = 3, color = "red")
# Add a line with slope 2 and intercept 3 (change values as needed)
library(ggplot2)
# Create the plot
# Define the x-axis range
x_range <- c(0, 10)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 3, color = "red", linetype = "solid", xlim = x_range) +
geom_abline(slope = -0.5, intercept = 6, color = "blue", linetype = "dashed", xlim = x_range) +
geom_abline(slope = 1.5, intercept = -1, color = "green", linetype = "dotted", xlim = x_range) +
xlim(x_range)
# Define the x-axis range
x_range <- c(0, 10)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 3, color = "red", linetype = "solid") +
geom_abline(slope = -0.5, intercept = 6, color = "blue", linetype = "dashed") +
geom_abline(slope = 1.5, intercept = -1, color = "green", linetype = "dotted") +
coord_cartesian(xlim = x_range)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = -0.5, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = 1.5, intercept = 0, color = "green", linetype = "dotted") +
coord_cartesian(xlim = x_range)
# Define the x-axis range
x_range <- c(0, 10)
y_range <- c(0, 10)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = -0.5, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = 1.5, intercept = 0, color = "green", linetype = "dotted") +
coord_cartesian(xlim = x_range, ylim = y_range)
x_range <- c(0, 100)
y_range <- c(0, 100)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = -0.5, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = 1.5, intercept = 0, color = "green", linetype = "dotted") +
coord_cartesian(xlim = x_range, ylim = y_range)
# Create the plot
# Define the x-axis range
x_range <- c(-100, 100)
y_range <- c(-100, 100)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = -0.5, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = 1.5, intercept = 0, color = "green", linetype = "dotted") +
coord_cartesian(xlim = x_range, ylim = y_range)
x_range <- c(-1, 1)
y_range <- c(-1, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = -0.5, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = 1.5, intercept = 0, color = "green", linetype = "dotted") +
coord_cartesian(xlim = x_range, ylim = y_range)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(-1, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 0, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range)
x_range <- c(-1, 1)
y_range <- c(-1, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 1, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range)
x_range <- c(-1, 1)
y_range <- c(-1, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 10, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(-1, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range)
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range) +
scale_y_continuous(limits = y_range)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range) +
theme(plot.margin = margin(t = 0, r = 0, b = 0, l = 0, unit = "cm"),
panel.clip = "off")
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range) +
theme(plot.margin = margin(t = 0, r = 0, b = 0, l = 0, unit = "cm"))
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range) +
theme(panel.border = element_blank())
# Create the plot
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, clip = "on") +
theme(panel.border = element_blank())
# Create the plot
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, clip = "off") +
theme(panel.border = element_blank())
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range) +
scale_y_continuous(limits = y_range)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, clip = "on") +
scale_y_continuous(limits = y_range)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, clip = "off") +
scale_y_continuous(limits = y_range)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = c(0, 0, 0, 0))
library(ggplot2)
# Create the plot
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
df2 <- df2 |> mutate("gain" = ((h.y - l.x)/l.x))
df2 <- df2 |> mutate("loss" = ((l.y - h.x)/h.x))
max(df2$gain)
min(df2$loss)
df <- read.csv('pricing.csv')
data <- df[, c('id', 'start', 'h', 'l', 'v')]
data$start <- substr(data$start, 0, 10)
data$start <- as.Date(as.character(data$start), format = "%Y-%m-%d")
data <- data |> filter(id != 4587)
library(dplyr)
df2 <- cross_join(data, data)
df2 <- df2 %>%
mutate(diff = difftime(start.y, start.x, units = "days")) %>%
filter(diff >= 365)
df2 <- df2 |> mutate("gain" = ((h.y - l.x)/l.x))
df2 <- df2 |> mutate("loss" = ((l.y - h.x)/h.x))
max(df2$gain)
min(df2$loss)
library(ggplot2)
# Create the plot
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain), intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = -min(df2$gain), intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
x_range <- c(-.5, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain), intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = -min(df2$gain), intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain)*100, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = -min(df2$gain)*100, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
# geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
# geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
# geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain)*100, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = -min(df2$gain)*100, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain)*100, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = min(df2$gain)*100, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain), intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = min(df2$gain)*100, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain), intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = min(df2$gain), intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
# Define the x-axis range
x_range <- c(-1, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
# geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
# geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
# geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain), intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = min(df2$gain), intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
run <- max(abs(max(gains)), abs(min(loss)))
run <- max(abs(max(df2$gains)), abs(min(df2$loss)))
abs(max(df2$gains))
ax(df2$gains)
max(df2$gains)
run <- max(abs(max(df2$gain)), abs(min(df2$loss)))
max(df2$gain)
df <- read.csv('pricing.csv')
data <- df[, c('id', 'start', 'h', 'l', 'v')]
data$start <- substr(data$start, 0, 10)
data$start <- as.Date(as.character(data$start), format = "%Y-%m-%d")
data <- data |> filter(id != 4587)
library(dplyr)
df2 <- cross_join(data, data)
df2 <- df2 %>%
mutate(diff = difftime(start.y, start.x, units = "days")) %>%
filter(diff >= 365)
df2 <- df2 |> mutate("gain" = (h.y - l.x))
df2 <- df2 |> mutate("loss" = (l.y - h.x))
max(df2$gain)
min(df2$loss)
library(ggplot2)
# Create the plot
# Define the x-axis range
run <- max(abs(max(df2$gain)), abs(min(df2$loss)))
x_range <- c(-run, 1)
y_range <- c(0, 1)
# Create the plot with no data points
ggplot() +
# geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
# geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
# geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain), intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = min(df2$loss), intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
df <- read.csv('pricing.csv')
data <- df[, c('id', 'start', 'h', 'l', 'v')]
data$start <- substr(data$start, 0, 10)
data$start <- as.Date(as.character(data$start), format = "%Y-%m-%d")
data <- data |> filter(id != 4587)
library(dplyr)
df2 <- cross_join(data, data)
df2 <- df2 %>%
mutate(diff = difftime(start.y, start.x, units = "days")) %>%
filter(diff >= 365)
df2 <- df2 |> mutate("gain" = (h.y - l.x))
df2 <- df2 |> mutate("loss" = (l.y - h.x))
max(df2$gain)
min(df2$loss)
library(ggplot2)
# Create the plot
# Define the x-axis range
run <- max(abs(max(df2$gain)), abs(min(df2$loss)))
x_range <- c(-run, run)
y_range <- c(0, run)
# Create the plot with no data points
ggplot() +
# geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
# geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
# geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = max(df2$gain), intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = min(df2$loss), intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
gain_rise <- df2 |> filter(gain = max(df2$gain))
gain_rise <- df2 |> filter(gain == max(df2$gain))
View(gain_rise)
gain <- df2 |> filter(gain == max(df2$gain))
loss <- df2 |> filter(loss == min(df2$loss))
View(loss)
df <- read.csv('pricing.csv')
data <- df[, c('id', 'start', 'h', 'l', 'v')]
data$start <- substr(data$start, 0, 10)
data$start <- as.Date(as.character(data$start), format = "%Y-%m-%d")
data <- data |> filter(id != 4587)
library(dplyr)
df2 <- cross_join(data, data)
df2 <- df2 %>%
mutate(diff = difftime(start.y, start.x, units = "days")) %>%
filter(diff >= 365)
df2 <- df2 |> mutate("gain" = (h.y - l.x)/l.x)
df2 <- df2 |> mutate("loss" = (l.y - h.x)/h.x)
gain <- df2 |> filter(gain == max(df2$gain))
loss <- df2 |> filter(loss == min(df2$loss))
View(gain)
View(loss)
gain_run <- gain[1,h.y] - gain[1,l.x]
gain_run <- gain[1,'h.y'] - gain[1,'l.x']
loss_run <- loss[1,'l.y'] - loss[1,'h.x']
View(loss)
run <- max(abs(gain_run), abs(loss_run))
gain_rise <- gain[1,'h.y'] - gain[1,'l.x']
gain_run <- gain[1, 'h.y']
loss_rise <- loss[1,'l.y'] - loss[1,'h.x']
loss_run <- loss[1,'l.y']
library(ggplot2)
library(dplyr)
df <- read.csv('pricing.csv')
data <- df[, c('id', 'start', 'h', 'l', 'v')]
data$start <- substr(data$start, 0, 10)
data$start <- as.Date(as.character(data$start), format = "%Y-%m-%d")
data <- data |> filter(id != 4587)
df2 <- cross_join(data, data)
df2 <- df2 %>%
mutate(diff = difftime(start.y, start.x, units = "days")) %>%
filter(diff >= 365)
df2 <- df2 |> mutate("gain" = (h.y - l.x)/l.x)
df2 <- df2 |> mutate("loss" = (l.y - h.x)/h.x)
gain <- df2 |> filter(gain == max(df2$gain))
loss <- df2 |> filter(loss == min(df2$loss))
gain_gains <- gain[1,'h.y'] - gain[1,'l.x']
gain_proceeds <- gain[1, 'h.y']
loss_gains <- loss[1,'l.y'] - loss[1,'h.x']
loss_proceeds <- loss[1,'l.y']
# gain_run <- gain[1,'h.y'] - gain[1,'l.x']
# loss_run <- loss[1,'l.y'] - loss[1,'h.x']
run <- max(abs(loss_gains), abs(gain_gains))
x_range <- c(-run, run)
y_range <- c(0, run)
library(ggplot2)
library(dplyr)
df <- read.csv('pricing.csv')
data <- df[, c('id', 'start', 'h', 'l', 'v')]
data$start <- substr(data$start, 0, 10)
data$start <- as.Date(as.character(data$start), format = "%Y-%m-%d")
data <- data |> filter(id != 4587)
df2 <- cross_join(data, data)
df2 <- df2 %>%
mutate(diff = difftime(start.y, start.x, units = "days")) %>%
filter(diff >= 365)
df2 <- df2 |> mutate("gain" = (h.y - l.x)/l.x)
df2 <- df2 |> mutate("loss" = (l.y - h.x)/h.x)
gain <- df2 |> filter(gain == max(df2$gain))
loss <- df2 |> filter(loss == min(df2$loss))
gain_gains <- gain[1,'h.y'] - gain[1,'l.x']
gain_proceeds <- gain[1, 'h.y']
loss_gains <- loss[1,'l.y'] - loss[1,'h.x']
loss_proceeds <- loss[1,'l.y']
# gain_run <- gain[1,'h.y'] - gain[1,'l.x']
# loss_run <- loss[1,'l.y'] - loss[1,'h.x']
run <- max(abs(loss_gains), abs(gain_gains))
x_range <- c(-run, run)
y_range <- c(0, run)
# Create the plot with no data points
ggplot() +
# geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
# geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
# geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = gain_proceeds/gain_gains, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = loss_proceeds/loss_gains, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
library(ggplot2)
library(dplyr)
df <- read.csv('pricing.csv')
data <- df[, c('id', 'start', 'h', 'l', 'v')]
data$start <- substr(data$start, 0, 10)
data$start <- as.Date(as.character(data$start), format = "%Y-%m-%d")
data <- data |> filter(id != 4587)
df2 <- cross_join(data, data)
df2 <- df2 %>%
mutate(diff = difftime(start.y, start.x, units = "days")) %>%
filter(diff >= 365)
df2 <- df2 |> mutate("gain" = (h.y - l.x)/l.x)
df2 <- df2 |> mutate("loss" = (l.y - h.x)/h.x)
gain <- df2 |> filter(gain == max(df2$gain))
loss <- df2 |> filter(loss == min(df2$loss))
gain_gains <- gain[1,'h.y'] - gain[1,'l.x']
gain_proceeds <- gain[1, 'h.y']
loss_gains <- loss[1,'l.y'] - loss[1,'h.x']
loss_proceeds <- loss[1,'l.y']
# gain_run <- gain[1,'h.y'] - gain[1,'l.x']
# loss_run <- loss[1,'l.y'] - loss[1,'h.x']
run <- max(abs(loss_gains), abs(gain_gains))
x_range <- c(-run, run)
y_range <- c(0, run)
# Create the plot with no data points
ggplot() +
# geom_abline(slope = 2, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = 100, intercept = 0, color = "blue", linetype = "dashed") +
# geom_abline(slope = -2, intercept = 0, color = "red", linetype = "solid") +
geom_abline(slope = gain_proceeds/gain_gains, intercept = 0, color = "green", linetype = "solid") +
geom_abline(slope = loss_proceeds/loss_gains, intercept = 0, color = "red", linetype = "solid") +
coord_cartesian(xlim = x_range, ylim = y_range, expand = 0)
